@using FlightSchoolTss.Data.Validation;

@inject ISnackbar Snackbar
@inject IMaintainersApiClient MaintainersApiClient 
@inject NavigationManager navigation

<MudForm Model="@_maintainerVm" @ref="@_mudForm" Validation="@(_validator.ValidateValue)">
    
    <MudTextField @bind-Value="_maintainerVm.Name"
                  Variant="Variant.Outlined"
                  For="(() => _maintainerVm.Name)"
                  Label="Maintainer Name"
                  Class="my-6" />

</MudForm>

@code {
    private MudForm _mudForm;
    private AddMaintainerVm _maintainerVm { get; set; } = new();
    private MaintainerAddVmValidator _validator = new MaintainerAddVmValidator();

    private async Task CreateMaintainer()
    {
        await MaintainersApiClient.CreateMaintainerAsync(_maintainerVm);

        Snackbar.Add($"The new Maintainer was Added!", MudBlazor.Severity.Success);

        navigation.NavigateTo("/maintainer");
    }
}